{% extends "common/internal_page.html" %}

{% block breadcrumbs %}
<a href="/">chipradio home</a> /
<a href="/djdb/">DJ Database home</a>
{% endblock %}

{% block content %}

{% block extrahead %}
<script type="text/javascript" 
    src="/media/common/js/jquery/jquery-1.3.1.js"></script>
<script type="text/javascript" 
    src="/media/djdb/js/djdb.js"></script>
{% endblock %}

<p>
This is the album information page for <b>{{ album.title }}</b> by
<a href="{{ album.artist_url }}">{{ album.artist_name }}</a>.
It is still very primitive.
</p>

{% if album.current_tags %}
<h3>Album Tags</h3>
{% for tag in album.sorted_current_tags %}
[{{ tag }}]
{% endfor %}
{% endif %}

<h3>Tracks</h3>
<form method="post" name="djdbTracksForm" action="update_tracks">
<p>
Select: <a id="checkbox_all" href="">All</a>, 
        <a id="checkbox_none" href="">None</a>, 
        <a id="checkbox_explicit" href="">Explicit</a>, 
        <a id="checkbox_recommended" href=" ">Recommended</a><br/>
Mark/Unmark selected as: <a id="mark_explicit" href="update_tracks">Explicit</a>, 
                         <a id="mark_recommended" href="update_tracks">Recommended</a>
</p>
<input type="hidden" name="mark_as"/>
<table>
{% for track in album.sorted_tracks %}
<tr
{% if track.is_explicit %}style="color: red;"{% endif %}
>
<td><input type="checkbox"
            class="checkbox{% if track.is_explicit %} explicit{% endif %}{% if track.is_recommended %} recommended{% endif %}"
            name="checkbox_{{ forloop.counter }}"/></td>
<td>{{ track.track_num }}.</td>
<td>{{ track.title }}</td>
<td>{{ track.duration }}</td>
<td><small>{{ track.bit_rate_kbps }} kbps</small></td>
<td>
{% for tag in track.sorted_current_tags %}
[{{tag}}]
{% endfor %}
</td>
</tr>
{% endfor %}
</table>
</form>

<h3>Reviews</h3>
{% if album.reviews %}
<a href="new_review">Write another review</a> of this album.
  {% for doc in album.reviews %}
<p>
<blockquote>
{{ doc.text|safe }}
</blockquote>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small>--posted by {{ doc.author }} on {{ doc.timestamp_display|date:"F j, Y P" }}</small>
  {% ifequal user.key doc.author.key %}
[ <a href="edit_review/{{ doc.key.id }}">Edit</a> ]
  {% endifequal %}
</p>
  {% endfor %}
{% else %}
No reviews yet!  You could be the first to
<a href="new_review">write a review</a> of this album.
{% endif %}


{% endblock %}
